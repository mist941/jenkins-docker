# Jenkins –∑ Docker - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –ó–∞–ø—É—Å–∫

–¶–µ–π –ø—Ä–æ–µ–∫—Ç –º—ñ—Å—Ç–∏—Ç—å –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –¥–ª—è –∑–∞–ø—É—Å–∫—É Jenkins —á–µ—Ä–µ–∑ Docker –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é Blue Ocean —Ç–∞ Docker-in-Docker —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ.

## üìã –í–∏–º–æ–≥–∏

### –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ —Å–∏—Å—Ç–µ–º–Ω—ñ –≤–∏–º–æ–≥–∏:
- **RAM**: 256 MB (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ 4+ GB)
- **–î–∏—Å–∫–æ–≤–∏–π –ø—Ä–æ—Å—Ç—ñ—Ä**: 1 GB (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ 50+ GB)
- **Docker**: –û—Å—Ç–∞–Ω–Ω—é –≤–µ—Ä—Å—ñ—é
- **Docker Compose**: –û—Å—Ç–∞–Ω–Ω—é –≤–µ—Ä—Å—ñ—é

### –ü—Ä–æ–≥—Ä–∞–º–Ω—ñ –≤–∏–º–æ–≥–∏:
- Java: –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ
- –í–µ–±-–±—Ä–∞—É–∑–µ—Ä –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ Jenkins UI

## üöÄ –®–≤–∏–¥–∫–∏–π –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó:**
   ```bash
   cd /opt/jenkins
   ```

2. **–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:**
   ```bash
   ./start.sh
   ```

3. **–ê–±–æ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose:**
   ```bash
   docker-compose up -d
   ```

4. **–î–æ—Å—Ç—É–ø –¥–æ Jenkins:**
   - –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä —ñ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ `http://localhost:8080`
   - –û—Ç—Ä–∏–º–∞–π—Ç–µ –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –ø–∞—Ä–æ–ª—å:
     ```bash
     docker exec jenkins-blueocean cat /var/jenkins_home/secrets/initialAdminPassword
     ```

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –°–µ—Ä–≤—ñ—Å–∏:
- **jenkins-docker** (docker:dind): Docker-in-Docker –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è Docker –∫–æ–º–∞–Ω–¥
- **jenkins-blueocean**: –û—Å–Ω–æ–≤–Ω–∏–π —Å–µ—Ä–≤–µ—Ä Jenkins –∑ Blue Ocean

### –ú–µ—Ä–µ–∂–∞:
- **jenkins**: –Ü–∑–æ–ª—å–æ–≤–∞–Ω–∞ –º–µ—Ä–µ–∂–∞ –¥–ª—è –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó –º—ñ–∂ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

### Volumes:
- **jenkins-data**: –ó–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ Jenkins (`/var/jenkins_home`)
- **jenkins-docker-certs**: TLS —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –¥–ª—è Docker

## üîß –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### Dockerfile
–ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ–º—É –æ–±—Ä–∞–∑—ñ `jenkins/jenkins:2.516.1-jdk21` –∑ –¥–æ–¥–∞–≤–∞–Ω–Ω—è–º:
- Docker CLI –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è Docker –∫–æ–º–∞–Ω–¥
- –ü–æ–ø–µ—Ä–µ–¥–Ω—å–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –ø–ª–∞–≥—ñ–Ω–∏: Blue Ocean, Docker Workflow, JSON Path API

### Docker Compose
–ù–∞–ª–∞—à—Ç–æ–≤—É—î –¥–≤–∞ —Å–µ—Ä–≤—ñ—Å–∏ –∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏ —Ç–∞ volume-–∞–º–∏.

## üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –ø–ª–∞–≥—ñ–Ω–∏

- **Blue Ocean**: –°—É—á–∞—Å–Ω–∏–π UI –¥–ª—è Jenkins Pipeline
- **Docker Workflow**: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Docker
- **JSON Path API**: –†–æ–±–æ—Ç–∞ –∑ JSON –¥–∞–Ω–∏–º–∏

## üîí –ë–µ–∑–ø–µ–∫–∞

- TLS —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –¥–ª—è Docker daemon
- –Ü–∑–æ–ª—å–æ–≤–∞–Ω–∞ –º–µ—Ä–µ–∂–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
- Volumes –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö

## üìã –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç—É—Å—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
docker-compose ps

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
docker-compose logs -f

# –ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose down

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose restart

# –í—Ö—ñ–¥ –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Jenkins
docker exec -it jenkins-blueocean bash

# –û—á–∏—â–µ–Ω–Ω—è volumes (–£–í–ê–ì–ê: –≤—Ç—Ä–∞—Ç–∏—Ç–µ –≤—Å—ñ –¥–∞–Ω—ñ!)
docker-compose down -v
```

## üõ†Ô∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–†–æ–∑–±–ª–æ–∫—É–≤–∞–Ω–Ω—è Jenkins**:
   - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å –∑ `/var/jenkins_home/secrets/initialAdminPassword`

2. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω—ñ–≤**:
   - –û–±–µ—Ä—ñ—Ç—å "Install suggested plugins" –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –Ω–∞–±–æ—Ä—É
   - –ê–±–æ –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ –≤—Ä—É—á–Ω—É –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–ª–∞–≥—ñ–Ω–∏

3. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞**:
   - –ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ñ–æ—Ä–º—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–µ—Ä—à–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

## üîó –ü–æ—Ä—Ç–∏

- **8080**: Jenkins Web UI
- **50000**: Jenkins agent port (–¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∞–≥–µ–Ω—Ç—ñ–≤)
- **2376**: Docker daemon port (–≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π)

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- [–û—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Jenkins Docker](https://www.jenkins.io/doc/book/installing/docker/)
- [Blue Ocean –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](https://www.jenkins.io/projects/blueocean/)
- [Jenkins Pipeline –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](https://www.jenkins.io/doc/book/pipeline/)
- [Docker-in-Docker –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](https://hub.docker.com/_/docker)

## üÜò –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### Jenkins –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è:
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ RAM
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `docker-compose logs jenkins`

### –ü—Ä–æ–±–ª–µ–º–∏ –∑ Docker-in-Docker:
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π –∑ –ø—Ä–∏–≤—ñ–ª–µ–π–æ–≤–∞–Ω–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –º–µ—Ä–µ–∂–µ–≤—ñ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

### –í—Ç—Ä–∞—Ç–∞ –¥–∞–Ω–∏—Ö:
- –î–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ Docker volumes
- –î–ª—è –±–µ–∫–∞–ø—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ: `docker cp jenkins-blueocean:/var/jenkins_home ./backup`